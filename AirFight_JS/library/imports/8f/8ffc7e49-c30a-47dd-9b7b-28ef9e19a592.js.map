{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Enemy2.js"],"names":["cc","Class","extends","Component","properties","speed","life","ctor","isDead","type","onLoad","start","unuse","node","stopAllActions","reuse","loader","loadRes","SpriteFrame","err","res","console","log","getComponent","Sprite","spriteFrame","update","dt","dead","noEvent","explode","event","Event","EventCustom","setUserData","dispatchEvent","parent","gainScoreEnemy2","fun","urls","loadResArray","runAction","sequence","callFunc","delayTime","emitter","enemy","position","y","distance","winSize","height","duration","moveBy","v2","callBack","seq","onCollisionStay","other","self","name","active"],"mappings":"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","file":"Enemy2.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed: 100,\r\n        life: 5,\r\n    },\r\n\r\n    ctor() {\r\n        this.isDead = false;\r\n        this.type = 2;\r\n       \r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n\r\n    },\r\n\r\n    start() {\r\n        // this.emitter();\r\n    },\r\n\r\n    \r\n    unuse() {\r\n        this.node.stopAllActions()\r\n    },\r\n\r\n    reuse() {\r\n        this.life = 3\r\n        this.isDead = false\r\n        cc.loader.loadRes('飞机3a', cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.getComponent(cc.Sprite).spriteFrame = res\r\n        })\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.life <= 0) {\r\n            this.dead()\r\n        }\r\n    },\r\n\r\n    dead(noEvent) {\r\n        if (!this.isDead) {\r\n            this.explode(()=>{\r\n                if (!noEvent) {\r\n                    \r\n                    let event = new cc.Event.EventCustom('enemyDestory', true)\r\n                    event.setUserData(this)\r\n                    this.node.dispatchEvent(event)\r\n                }\r\n            });\r\n            this.node.parent.getComponent('Game').gainScoreEnemy2();\r\n            this.isDead = true;\r\n        }\r\n    },\r\n\r\n    explode(fun) {\r\n        var urls = ['飞机3a爆炸1', '飞机3a爆炸2', '飞机3a爆炸3', '飞机3a爆炸4', '飞机3a爆炸5']\r\n        cc.loader.loadResArray(urls, cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.node.runAction(cc.sequence(cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[0]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[1]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[2]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[3]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[4]\r\n            }), cc.delayTime(0), cc.callFunc(() => {\r\n                fun()\r\n            })))\r\n        })\r\n    },\r\n\r\n    emitter: function () {\r\n        var enemy = this.node;\r\n        enemy.position = this.node.position;\r\n        enemy.y = this.node.y;\r\n        enemy.parent = this.node.parent;\r\n        let distance = (cc.winSize.height + this.node.y);\r\n        let duration = distance / this.speed;\r\n        let moveBy = cc.moveBy(duration, cc.v2(0, -distance));\r\n        let callBack = cc.callFunc(() => {\r\n            let event = new cc.Event.EventCustom('enemyDestory', true)\r\n            event.setUserData(this)\r\n            this.node.dispatchEvent(event)\r\n        }, this);\r\n        // let sequence = cc.sequence(moveBy, reMoveSelf);\r\n        let seq = cc.sequence(moveBy, callBack)\r\n        enemy.runAction(seq);\r\n    },\r\n\r\n    onCollisionStay: function (other, self) {\r\n        this.life--;\r\n        if (other.node.name == \"PlayerBullets\") {\r\n            other.node.active = false;\r\n        }\r\n        //console.log('on collision enter');\r\n        //console.log('Enemy1Life: ' + this.life);\r\n    },\r\n})\r\n"]}