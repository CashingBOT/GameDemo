{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Enemy1.js"],"names":["cc","Class","extends","Component","properties","speed","life","ctor","isDead","type","onLoad","unuse","node","stopAllActions","active","reuse","loader","loadRes","SpriteFrame","err","res","console","log","getComponent","Sprite","spriteFrame","start","update","dt","dead","noEvent","explode","event","Event","EventCustom","setUserData","dispatchEvent","parent","gainScoreEnemy2","fun","urls","loadResArray","runAction","sequence","callFunc","delayTime","emitter","enemy","position","y","distance","winSize","height","duration","moveBy","v2","callBack","seq","onCollisionStay","other","self","name"],"mappings":"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","file":"Enemy1.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        speed: 100,\r\n        life: 5,\r\n    },\r\n\r\n    ctor() {\r\n        this.isDead = false;\r\n        this.type = 1;\r\n\r\n    },\r\n\r\n    onLoad() {\r\n\r\n    },\r\n\r\n    unuse() {\r\n        this.node.stopAllActions()\r\n        this.active = false\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    reuse() {\r\n        this.active = true\r\n        this.life = 1\r\n        this.isDead = false\r\n        cc.loader.loadRes('飞机2a', cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.getComponent(cc.Sprite).spriteFrame = res\r\n        })\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.life <= 0 && !this.isDead) {\r\n            this.dead()\r\n        }\r\n    },\r\n\r\n    dead(noEvent) {\r\n        if (!this.isDead) {\r\n            this.explode(() => {\r\n                if (!noEvent) {\r\n                    let event = new cc.Event.EventCustom('enemyDestory', true)\r\n                    event.setUserData(this)\r\n                    this.node.dispatchEvent(event)\r\n                }\r\n            });\r\n            this.node.parent.getComponent('Game').gainScoreEnemy2();\r\n            this.isDead = true;\r\n        }\r\n    },\r\n\r\n    explode(fun) {\r\n        var urls = ['飞机2a爆炸1', '飞机2a爆炸2', '飞机2a爆炸3', '飞机2a爆炸4']\r\n        cc.loader.loadResArray(urls, cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.node.runAction(cc.sequence(cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[0]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[1]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[2]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[3]\r\n            }), cc.delayTime(0), cc.callFunc(() => {\r\n                fun()\r\n            })))\r\n        })\r\n    },\r\n\r\n    emitter: function () {\r\n        var enemy = this.node;\r\n        enemy.position = this.node.position;\r\n        enemy.y = this.node.y;\r\n        enemy.parent = this.node.parent;\r\n        let distance = (cc.winSize.height + this.node.y);\r\n        let duration = distance / this.speed;\r\n        let moveBy = cc.moveBy(duration, cc.v2(0, -distance));\r\n        let callBack = cc.callFunc(() => {\r\n            let event = new cc.Event.EventCustom('enemyDestory', true)\r\n            event.setUserData(this)\r\n            this.node.dispatchEvent(event)\r\n        }, this);\r\n        let seq = cc.sequence(moveBy, callBack)\r\n        enemy.runAction(seq);\r\n    },\r\n\r\n    onCollisionStay: function (other, self) {\r\n        this.life--;\r\n        if (other.node.name == \"PlayerBullets\") {\r\n            other.node.active = false;\r\n        }\r\n        //console.log('on collision enter');\r\n        //console.log('Enemy1Life: ' + this.life);\r\n    },\r\n})\r\n"]}