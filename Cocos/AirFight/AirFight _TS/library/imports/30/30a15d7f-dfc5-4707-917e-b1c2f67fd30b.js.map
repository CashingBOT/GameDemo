{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Enemy1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn TypeScript:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Enemy1 extends cc.Component {\r\n\r\n    @property()\r\n    speed = 100;\r\n\r\n    @property()\r\n    life = 3;\r\n\r\n    private isDead = false;\r\n    private active = false;\r\n    private type = 1;\r\n\r\n    // onLoad() {}\r\n\r\n    public unuse() {\r\n        this.node.stopAllActions()\r\n        this.active = false\r\n    }\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    public reuse() {\r\n        this.active = true\r\n        this.life = 3\r\n        this.isDead = false\r\n        cc.loader.loadRes('飞机2a', cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.getComponent(cc.Sprite).spriteFrame = res\r\n        })\r\n    }\r\n\r\n    // start() {}\r\n\r\n    update(dt) {\r\n        if (this.life <= 0 && !this.isDead) {\r\n            this.dead()\r\n        }\r\n    }\r\n\r\n    public dead(noEvent?) {\r\n        if (!this.isDead) {\r\n            this.explode(() => {\r\n                if (!noEvent) {\r\n                    let event = new cc.Event.EventCustom('enemyDestory', true)\r\n                    event.setUserData(this)\r\n                    this.node.dispatchEvent(event)\r\n                }\r\n            });\r\n            this.node.parent.getComponent('Game').gainScoreEnemy1();\r\n            this.isDead = true;\r\n        }\r\n    }\r\n\r\n    public explode(fun) {\r\n        var urls = ['飞机2a爆炸1', '飞机2a爆炸2', '飞机2a爆炸3', '飞机2a爆炸4']\r\n        cc.loader.loadResArray(urls, cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            this.node.runAction(cc.sequence(cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[0]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[1]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[2]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[3]\r\n            }), cc.delayTime(0), cc.callFunc(() => {\r\n                fun()\r\n            })))\r\n        })\r\n    }\r\n\r\n    public emitter() {\r\n        var enemy = this.node;\r\n        enemy.position = this.node.position;\r\n        enemy.y = this.node.y;\r\n        enemy.parent = this.node.parent;\r\n        let distance = (cc.winSize.height + this.node.y);\r\n        let duration = distance / this.speed;\r\n        let moveBy = cc.moveBy(duration, cc.v2(0, -distance));\r\n        let callBack = cc.callFunc(() => {\r\n            let event = new cc.Event.EventCustom('enemyDestory', true)\r\n            event.setUserData(this)\r\n            this.node.dispatchEvent(event)\r\n        }, this);\r\n        let seq = cc.sequence(moveBy, callBack)\r\n        enemy.runAction(seq);\r\n    }\r\n\r\n    public onCollisionStay(other, self) {\r\n        this.life--;\r\n        if (other.node.name == \"PlayerBullets\") {\r\n            other.node.active = false;\r\n        }\r\n        //console.log('on collision enter');\r\n        //console.log('Enemy1Life: ' + this.life);\r\n    }\r\n}\r\n"]}