{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\Player.js"],"names":["cc","Class","extends","Component","properties","flySpeed","life","powerTime","lifeTag","default","type","Node","enemy1","Prefab","enemy2","enemy3","ctor","isDead","_emitSeq","onLoad","accLeft","accRight","accUp","accDown","isStart","powerOn","bomber","touchStart","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","onDestroy","off","node","TOUCH_MOVE","on_touch_move","TOUCH_START","TOUCH_END","start","gameStart","update","dt","getComponent","emitter","dirc","v2","speed","x","y","Math","sqrt","parent","width","height","explode","enabled","event","keyCode","macro","KEY","a","d","w","s","k","getChildByName","active","boom","keyEvent","touchEvent","emitOff","emitOn","t","n_pos","getLocation","delta","getDelta","touchOff","touchOn","urls","loader","loadResArray","SpriteFrame","err","res","console","log","runAction","sequence","callFunc","Sprite","spriteFrame","delayTime","onCollisionEnter","other","self","name"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        flySpeed: 5,\r\n        life: 3,\r\n        powerTime: 30,\r\n\r\n        lifeTag: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        enemy1: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        enemy2: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        enemy3: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n    },\r\n\r\n    ctor() {\r\n        this.isDead = false;\r\n        this._emitSeq = 0;\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        //定义移动开关\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        this.accUp = false;\r\n        this.accDown = false;\r\n        this.isStart = false;\r\n        this.powerOn = false;\r\n        this.bomber = false;\r\n        this.touchStart = false;\r\n        // 初始化键盘输入监听\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    onDestroy() {\r\n        // 取消键盘输入监听\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this)\r\n        this.node.off(cc.Node.EventType.TOUCH_START, () => {\r\n            this.touchStart = true\r\n        }, this)\r\n        this.node.off(cc.Node.EventType.TOUCH_END, () => {\r\n            this.touchStart = false\r\n        }, this)\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n\r\n    gameStart() {\r\n        this.isStart = true;\r\n    },\r\n\r\n    update(dt) {\r\n        if (!this.isStart) { return; }\r\n        if (this.touchStart) {\r\n            if (this._emitSeq > 0.2) {\r\n                this._emitSeq = 0;\r\n                this.node.getComponent('PlayerBulletsEmitter1').emitter()\r\n            }\r\n            this._emitSeq = this._emitSeq + dt;\r\n        }\r\n        //根据要移动的方向更新主角速度\r\n        //左右移动\r\n        let dirc = cc.v2(0, 0)\r\n        let speed = 0\r\n        if (this.accLeft) {\r\n            // this.node.x -= this.flySpeed * dt;\r\n            dirc.x = dirc.x - 1\r\n        }\r\n        if (this.accRight) {\r\n            // this.node.x += this.flySpeed * dt;  \r\n            dirc.x = dirc.x + 1\r\n        }\r\n        //上下移动\r\n        if (this.accDown) {\r\n            // this.node.y -= this.flySpeed * dt;\r\n            dirc.y = dirc.y - 1\r\n        }\r\n        if (this.accUp) {\r\n            // this.node.y += this.flySpeed * dt;\r\n            dirc.y = dirc.y + 1\r\n        }\r\n\r\n        if (dirc.x == 0 && dirc.y == 0) { }\r\n        else {\r\n            speed = this.flySpeed / Math.sqrt((dirc.x * dirc.x) + (dirc.y * dirc.y))\r\n        }\r\n\r\n        this.node.y += speed * dt * dirc.y\r\n        this.node.x += speed * dt * dirc.x\r\n\r\n        if (this.node.x > this.node.parent.width / 2) {\r\n            this.node.x = this.node.parent.width / 2;\r\n            this.speed = 0\r\n        }\r\n        else if (this.node.x < -this.node.parent.width / 2) {\r\n            this.node.x = -this.node.parent.width / 2;\r\n            this.speed = 0\r\n        }\r\n\r\n        if (this.node.y > this.node.parent.height / 2) {\r\n            this.node.y = this.node.parent.height / 2;\r\n            this.speed = 0\r\n        }\r\n        else if (this.node.y < -this.node.parent.height / 2) {\r\n            this.node.y = -this.node.parent.height / 2;\r\n            this.speed = 0\r\n        }\r\n\r\n        if (this.life == 0 && !this.isDead) {\r\n            this.explode()\r\n            this.isDead = true\r\n        }\r\n\r\n        if (this.powerOn) {\r\n            this.powerTime -= 1 * dt;\r\n            if (this.powerTime <= 0) {\r\n                this.powerOn = false;\r\n                this.powerTime = 30;\r\n                this.node.getComponent('PlayerBulletsEmitter1').enabled = true;\r\n                this.node.getComponent('PlayerBulletsEmitter').enabled = false;\r\n                this.node.getComponent('PlayerBulletsEmitter2').enabled = false;\r\n            }\r\n        }\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        // set a flag when key pressed\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.accUp = true;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.accDown = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyUp(event) {\r\n        // unset a flag when key released\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.accUp = false;\r\n                break;\r\n            case cc.macro.KEY.s:\r\n                this.accDown = false;\r\n                break;\r\n            case cc.macro.KEY.k:\r\n                if (this.bomber) {\r\n                    this.node.parent.getChildByName('Bomb').active = false;\r\n                    this.node.parent.getComponent(\"Spawn\").boom();\r\n                    this.bomber = false;\r\n                }\r\n        }\r\n    },\r\n\r\n    keyEvent() {\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    },\r\n\r\n    touchEvent() {\r\n        if(!this.isStart){return};\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this);\r\n        this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.touchStart = true;\r\n            this.node.getComponent('PlayerBulletsEmitter1').emitOff();\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.touchStart = false;\r\n            this.node.getComponent('PlayerBulletsEmitter1').emitOn();\r\n            cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n            cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        }, this)\r\n    },\r\n\r\n    on_touch_move(t) {\r\n        //定义一个n_pos变量存储当前触摸点的位置\r\n        var n_pos = t.getLocation();\r\n        //打印触摸点的坐标，x坐标，y坐标\r\n        // console.log(n_pos, n_pos.x, n_pos.y);\r\n\r\n        //定义变量delta存储变化距离\r\n        var delta = t.getDelta();\r\n        //变化当前节点位置使其跟随触摸点,实现按住移动效果\r\n        this.node.x += delta.x;\r\n        this.node.y += delta.y;\r\n    },\r\n\r\n    touchOff(){\r\n        this.node.off(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this)\r\n        this.node.off(cc.Node.EventType.TOUCH_START, () => {\r\n            this.touchStart = true\r\n        }, this)\r\n        this.node.off(cc.Node.EventType.TOUCH_END, () => {\r\n            this.touchStart = false\r\n        }, this)\r\n    },\r\n\r\n    touchOn(){\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, this.on_touch_move, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n            this.touchStart = true\r\n        }, this)\r\n        this.node.on(cc.Node.EventType.TOUCH_END, () => {\r\n            this.touchStart = false\r\n        }, this)\r\n    },\r\n\r\n    explode() {\r\n        var urls = ['飞机1a爆炸1', '飞机1a爆炸2', '飞机1a爆炸3', '飞机1a爆炸4']\r\n        cc.loader.loadResArray(urls, cc.SpriteFrame, (err, res) => {\r\n            if (err) {\r\n                console.log('error');\r\n                return;\r\n            }\r\n            cc.log(res)\r\n            this.node.runAction(cc.sequence(cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[0]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[1]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[2]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.getComponent(cc.Sprite).spriteFrame = res[3]\r\n            }), cc.delayTime(0.075), cc.callFunc(() => {\r\n                this.node.active = false\r\n            })))\r\n        })\r\n    },\r\n\r\n    onCollisionEnter: function (other, self) {\r\n        if (other.node.name == \"EnemyBullets\") {\r\n            other.node.active = false;\r\n            this.life--;\r\n        }\r\n\r\n        if (other.node.name == \"Enemy1\") {\r\n            this.life--;\r\n        }\r\n\r\n        if (other.node.name == \"LifeItem\") {\r\n            other.node.active = false;\r\n            if (this.life < 3) {\r\n                this.life += 1;\r\n                if (this.life == 2) {\r\n                    this.lifeTag.getChildByName('Life2').active = true;\r\n                }\r\n                else {\r\n                    this.lifeTag.getChildByName('Life3').active = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (other.node.name == \"PowerItem\") {\r\n            other.node.active = false;\r\n            this.powerOn = true;\r\n            this.node.getComponent('PlayerBulletsEmitter1').enabled = false;\r\n            this.node.getComponent('PlayerBulletsEmitter').enabled = true;\r\n            this.node.getComponent('PlayerBulletsEmitter2').enabled = true;\r\n        }\r\n\r\n        if (other.node.name == \"BombItem\") {\r\n            other.node.active = false;\r\n            this.node.parent.getChildByName('Bomb').active = true;\r\n            this.bomber = true;\r\n        }\r\n    },\r\n});"]}