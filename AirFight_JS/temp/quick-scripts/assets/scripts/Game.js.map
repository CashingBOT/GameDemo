{"version":3,"sources":["Game.js"],"names":["cc","Class","extends","Component","properties","player","default","type","Node","enemy1","Prefab","background","scoreDisplay","Label","life","onLoad","node","getChildByName","active","systemEvent","on","SystemEvent","EventType","KEY_UP","onKeyUp","KEY_DOWN","onKeyDown","onDestroy","off","event","keyCode","macro","KEY","space","color","fromHEX","isDead","started","gameStart","isPaused","gameResume","gamePause","gameRestart","start","getComponent","touchEvent","gameInit","resetScore","director","pause","resume","gamePauesResume","touchOff","touchOn","game","restart","gainScoreEnemy1","score","string","toString","gainScoreEnemy2","gainScoreEnemy3","gameOver","stopAllActions","update","dt","runAction","sequence","delayTime","callFunc"],"mappings":"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","file":"Game.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        player: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        enemy1: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        background: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        scoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n\r\n        life: {\r\n            default: null,\r\n            type: cc.Node\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        this.node.getChildByName('Pause').active = false;\r\n        this.node.getChildByName('TopScores').active = false;\r\n        this.node.getChildByName('Life').active = false;\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    },\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n    },\r\n\r\n    onKeyUp(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.space:\r\n                this.node.getChildByName('Start').color = cc.color().fromHEX('#D6D6D6')\r\n                this.node.getChildByName('Pause').color = cc.color().fromHEX('#D6D6D6')\r\n                if (!this.isDead) {\r\n                    if (!this.started) {\r\n                        this.gameStart();\r\n                        this.started = true;\r\n                    }\r\n                    else {\r\n                        if (this.isPaused) {\r\n                            this.gameResume()\r\n                            this.node.getChildByName('Instruction').active = false;\r\n                            this.isPaused = false;\r\n                        }\r\n                        else {\r\n                            this.gamePause()\r\n                        }\r\n                    }\r\n                }\r\n                else { this.gameRestart() }\r\n                break;\r\n        }\r\n    },\r\n\r\n    onKeyDown(event) {\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.space:\r\n                this.node.getChildByName('Start').color = cc.color().fromHEX('#FFFFFF')\r\n                if (!this.isDead) {\r\n                    if (this.started) {\r\n                        this.node.getChildByName('Pause').color = cc.color().fromHEX('#FFFFFF')\r\n                            if (this.isPaused) {\r\n                            this.node.getChildByName('PauseFont').active = false;\r\n                        }\r\n                        else {\r\n                            this.node.getChildByName('PauseFont').active = true;\r\n                            this.node.getChildByName('Instruction').active = true;\r\n                        }\r\n                    }\r\n                }\r\n                this.node.getChildByName('Back').color = cc.color().fromHEX('#FFFFFF')\r\n                break;\r\n        }\r\n    },\r\n\r\n    start() {\r\n    },\r\n\r\n    gameStart() {\r\n        this.started = false;\r\n        this.isDead = false;\r\n        this.isPaused = false;\r\n        this.player.getComponent(\"Player\").gameStart();\r\n        this.player.getComponent(\"Player\").touchEvent();\r\n        this.node.getComponent(\"Spawn\").gameStart();\r\n        this.gameInit();\r\n        this.resetScore()\r\n    },\r\n\r\n    gameInit() {\r\n        this.node.getChildByName('Start').active = false;\r\n        this.node.getChildByName('Tittle').active = false;\r\n        this.node.getChildByName('Instruction').active = false;\r\n        this.node.getChildByName('Pause').active = true;\r\n        this.node.getChildByName('TopScores').active = true;\r\n        this.node.getChildByName('Life').active = true;\r\n    },\r\n\r\n    gamePause() {\r\n        cc.director.pause();\r\n        this.isPaused = true;\r\n    },\r\n\r\n    gameResume() {\r\n        cc.director.resume();\r\n    },\r\n\r\n    gamePauesResume() {\r\n        if (!this.isPaused) {\r\n            cc.director.pause();\r\n            this.isPaused = true;\r\n            this.node.getChildByName('PauseFont').active = true;\r\n            this.node.getChildByName('Instruction').active = true;\r\n            this.player.getComponent(\"Player\").touchOff();\r\n        }\r\n        else {\r\n            cc.director.resume();\r\n            this.isPaused = false;\r\n            this.node.getChildByName('PauseFont').active = false;\r\n            this.node.getChildByName('Instruction').active = false;\r\n            this.player.getComponent(\"Player\").touchOn();\r\n        }\r\n    },\r\n\r\n    gameRestart() {\r\n        cc.game.restart()\r\n    },\r\n\r\n    gainScoreEnemy1() {\r\n        this.score += 1;\r\n        this.scoreDisplay.string = this.score.toString();\r\n    },\r\n\r\n    gainScoreEnemy2() {\r\n        this.score += 9;\r\n        this.scoreDisplay.string = this.score.toString();\r\n    },\r\n\r\n    gainScoreEnemy3() {\r\n        this.score += 3;\r\n        this.scoreDisplay.string = this.score.toString();\r\n    },\r\n\r\n    resetScore() {\r\n        this.score = 0;\r\n        this.scoreDisplay.string = this.score.toString();\r\n    },\r\n\r\n    gameOver() {\r\n        this.isDead = true;\r\n        this.node.stopAllActions();\r\n        this.node.getChildByName('Pause').active = false;\r\n        this.node.getChildByName('GameOver').active = true;\r\n        this.node.getChildByName('Back').active = true;\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.player.getComponent(\"Player\").life <= 0) {\r\n            this.life.getChildByName('Life1').active = false;\r\n            this.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(() => this.gameOver())))\r\n        }\r\n        if (this.player.getComponent(\"Player\").life <= 2) {\r\n            this.life.getChildByName('Life3').active = false;\r\n        }\r\n        if (this.player.getComponent(\"Player\").life <= 1) {\r\n            this.life.getChildByName('Life2').active = false;\r\n        }\r\n    },\r\n});\r\n"]}